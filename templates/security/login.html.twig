
{% extends 'base.html.twig' %}

  {% block title %}Connexion - TheCrossLove{% endblock %}

  {% block stylesheets %}
      {{ parent() }}
      <style>
          .auth-container {
              max-width: 480px;
              margin: 4rem auto;
              padding: 0 1.5rem;
          }

          .auth-card {
              background-color: var(--white);
              border-radius: 1rem;
              padding: 3rem 2.5rem;
              box-shadow: var(--shadow-lg);
          }

          .auth-header {
              text-align: center;
              margin-bottom: 2rem;
          }

          .auth-title {
              font-size: 2rem;
              font-weight: 700;
              color: var(--text-dark);
              margin-bottom: 0.5rem;
          }

          .auth-subtitle {
              color: var(--text-gray);
              font-size: 0.938rem;
          }

          .alert {
              padding: 1rem;
              border-radius: 0.5rem;
              margin-bottom: 1.5rem;
              font-size: 0.875rem;
          }

          .alert-danger {
              background-color: #fee;
              color: #c00;
              border: 1px solid #fcc;
          }

          .alert-success {
              background-color: #d4edda;
              color: #155724;
              border: 1px solid #c3e6cb;
          }

          .form-group {
              margin-bottom: 1.5rem;
          }

          .form-label {
              display: block;
              font-weight: 500;
              margin-bottom: 0.5rem;
              color: var(--text-dark);
              font-size: 0.875rem;
          }

          .form-control {
              width: 100%;
              padding: 0.875rem 1rem;
              border: 1.5px solid var(--border-gray);
              border-radius: 0.5rem;
              font-size: 0.938rem;
              transition: all 0.2s;
          }

          .form-control:focus {
              outline: none;
              border-color: var(--primary-red);
              box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
          }

          .btn-submit {
              width: 100%;
              padding: 1rem;
              background-color: var(--primary-red);
              color: var(--white);
              border: none;
              border-radius: 0.5rem;
              font-weight: 600;
              font-size: 1rem;
              cursor: pointer;
              transition: all 0.2s;
              margin-top: 0.5rem;
          }

          .btn-submit:hover {
              background-color: var(--primary-red-hover);
              transform: translateY(-2px);
              box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
          }

          .auth-footer {
              text-align: center;
              margin-top: 2rem;
              padding-top: 1.5rem;
              border-top: 1px solid var(--border-gray);
              font-size: 0.875rem;
              color: var(--text-gray);
          }

          .auth-footer a {
              color: var(--primary-red);
              text-decoration: none;
              font-weight: 600;
          }

          .auth-footer a:hover {
              text-decoration: underline;
          }

          .back-to-home {
              text-align: center;
              margin-top: 1.5rem;
          }

          .back-to-home a {
              color: var(--text-gray);
              text-decoration: none;
              font-size: 0.875rem;
              display: inline-flex;
              align-items: center;
              gap: 0.5rem;
          }

          .back-to-home a:hover {
              color: var(--primary-red);
          }
      </style>
  {% endblock %}

  {% block body %}
      <div class="auth-container">
          <div class="auth-card">
              <div class="auth-header">
                  <h1 class="auth-title">Connexion</h1>
                  <p class="auth-subtitle">Connectez-vous pour accéder à vos événements</p>
              </div>

              {% if error %}
                  <div class="alert alert-danger">
                      {{ error.messageKey|trans(error.messageData, 'security') }}
                  </div>
              {% endif %}

              {% if app.request.hasPreviousSession %}
                  {% for message in app.flashes('success') %}
                      <div class="alert alert-success">
                          {{ message }}
                      </div>
                  {% endfor %}
              {% endif %}

              <form method="post" action="{{ path('default_login') }}">
                  <div class="form-group">
                      <label for="username" class="form-label">Email</label>
                      <input
                          type="email"
                          id="username"
                          name="_username"
                          class="form-control"
                          value="{{ last_username|default('') }}"
                          placeholder="votre@email.com"
                          required
                          autofocus
                      >
                  </div>

                  <div class="form-group">
                      <label for="password" class="form-label">Mot de passe</label>
                      <input
                          type="password"
                          id="password"
                          name="_password"
                          class="form-control"
                          placeholder="••••••••"
                          required
                      >
                  </div>

                  <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

                  <button type="submit" class="btn-submit">
                      Se connecter
                  </button>
              </form>

              <div class="auth-footer">
                  Pas encore de compte ?
                  <a href="{{ path('default_register') }}">Créer un compte</a>
              </div>
          </div>

          <div class="back-to-home">
              <a href="{{ path('default_home') }}">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                       stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 19l-7-7 7-7"/>
                  </svg>
                  Retour à l'accueil
              </a>
          </div>
      </div>
  {% endblock %}
